--- src/wiphy.c
+++ src/wiphy.c
@@ -500,7 +500,11 @@
 
 	if (out_num)
 		*out_num =
+#if defined(__GLIBC__) 
 			(uint8_t *) rawmemchr(wiphy->supported_rates[band], 0) -
+#else
+			(uint8_t *) memchr(wiphy->supported_rates[band], 0, SIZE_MAX) -
+#endif
 			wiphy->supported_rates[band];
 
 	return wiphy->supported_rates[band];
